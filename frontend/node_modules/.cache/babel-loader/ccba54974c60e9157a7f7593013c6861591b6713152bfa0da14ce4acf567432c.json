{"ast":null,"code":"import React,{createContext,useContext,useState,useEffect}from'react';import{useAuth}from'./AuthContext';import wishlistService from'../services/wishlistService';import{jsx as _jsx}from\"react/jsx-runtime\";const WishlistContext=/*#__PURE__*/createContext();export const useWishlist=()=>{const context=useContext(WishlistContext);if(!context){throw new Error('useWishlist must be used within a WishlistProvider');}return context;};export const WishlistProvider=_ref=>{let{children}=_ref;const[wishlistItems,setWishlistItems]=useState([]);const{user}=useAuth();useEffect(()=>{if(user){const saved=localStorage.getItem(\"wishlist_\".concat(user.email));if(saved){setWishlistItems(JSON.parse(saved));}}else{setWishlistItems([]);}},[user]);const addToWishlist=async product=>{if(user&&!wishlistItems.find(item=>item._id===product._id)){try{await wishlistService.addToWishlist(product,user.email);const newItems=[...wishlistItems,product];setWishlistItems(newItems);}catch(error){console.error('Failed to add to wishlist:',error);}}};const removeFromWishlist=async productId=>{if(user){try{await wishlistService.removeFromWishlist(productId,user.email);const newItems=wishlistItems.filter(item=>item._id!==productId);setWishlistItems(newItems);}catch(error){console.error('Failed to remove from wishlist:',error);}}};const isInWishlist=productId=>{return wishlistItems.some(item=>item._id===productId);};return/*#__PURE__*/_jsx(WishlistContext.Provider,{value:{wishlistItems,addToWishlist,removeFromWishlist,isInWishlist,wishlistCount:wishlistItems.length},children:children});};","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","useAuth","wishlistService","jsx","_jsx","WishlistContext","useWishlist","context","Error","WishlistProvider","_ref","children","wishlistItems","setWishlistItems","user","saved","localStorage","getItem","concat","email","JSON","parse","addToWishlist","product","find","item","_id","newItems","error","console","removeFromWishlist","productId","filter","isInWishlist","some","Provider","value","wishlistCount","length"],"sources":["D:/project1/stitch_and_savour/frontend/src/context/WishlistContext.js"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\nimport { useAuth } from './AuthContext';\nimport wishlistService from '../services/wishlistService';\n\nconst WishlistContext = createContext();\n\nexport const useWishlist = () => {\n  const context = useContext(WishlistContext);\n  if (!context) {\n    throw new Error('useWishlist must be used within a WishlistProvider');\n  }\n  return context;\n};\n\nexport const WishlistProvider = ({ children }) => {\n  const [wishlistItems, setWishlistItems] = useState([]);\n  const { user } = useAuth();\n\n  useEffect(() => {\n    if (user) {\n      const saved = localStorage.getItem(`wishlist_${user.email}`);\n      if (saved) {\n        setWishlistItems(JSON.parse(saved));\n      }\n    } else {\n      setWishlistItems([]);\n    }\n  }, [user]);\n\n  const addToWishlist = async (product) => {\n    if (user && !wishlistItems.find(item => item._id === product._id)) {\n      try {\n        await wishlistService.addToWishlist(product, user.email);\n        const newItems = [...wishlistItems, product];\n        setWishlistItems(newItems);\n      } catch (error) {\n        console.error('Failed to add to wishlist:', error);\n      }\n    }\n  };\n\n  const removeFromWishlist = async (productId) => {\n    if (user) {\n      try {\n        await wishlistService.removeFromWishlist(productId, user.email);\n        const newItems = wishlistItems.filter(item => item._id !== productId);\n        setWishlistItems(newItems);\n      } catch (error) {\n        console.error('Failed to remove from wishlist:', error);\n      }\n    }\n  };\n\n  const isInWishlist = (productId) => {\n    return wishlistItems.some(item => item._id === productId);\n  };\n\n  return (\n    <WishlistContext.Provider value={{\n      wishlistItems,\n      addToWishlist,\n      removeFromWishlist,\n      isInWishlist,\n      wishlistCount: wishlistItems.length\n    }}>\n      {children}\n    </WishlistContext.Provider>\n  );\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}