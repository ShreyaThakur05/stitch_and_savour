{"ast":null,"code":"import axios from 'axios';\nimport { config } from '../config/config';\nconst API_URL = config.API_URL;\nconst api = axios.create({\n  baseURL: API_URL,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// Add token to requests\napi.interceptors.request.use(config => {\n  const token = localStorage.getItem('token');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n}, error => Promise.reject(error));\nexport const wishlistService = {\n  // Add to wishlist - save to both backend and localStorage\n  addToWishlist: async (product, userEmail) => {\n    try {\n      var _product$images;\n      // Try to save to backend first\n      const response = await api.post('/wishlist/add', {\n        productId: product._id,\n        productName: product.name,\n        productPrice: product.price,\n        productImage: ((_product$images = product.images) === null || _product$images === void 0 ? void 0 : _product$images[0]) || ''\n      });\n\n      // Update localStorage\n      const existingWishlist = JSON.parse(localStorage.getItem(`wishlist_${userEmail}`) || '[]');\n      if (!existingWishlist.find(item => item._id === product._id)) {\n        existingWishlist.push(product);\n        localStorage.setItem(`wishlist_${userEmail}`, JSON.stringify(existingWishlist));\n      }\n      return response.data;\n    } catch (error) {\n      // Fallback to localStorage only\n      console.warn('Backend unavailable, saving to localStorage only:', error.message);\n      const existingWishlist = JSON.parse(localStorage.getItem(`wishlist_${userEmail}`) || '[]');\n      if (!existingWishlist.find(item => item._id === product._id)) {\n        existingWishlist.push({\n          ...product,\n          isLocal: true\n        });\n        localStorage.setItem(`wishlist_${userEmail}`, JSON.stringify(existingWishlist));\n      }\n      return {\n        success: true\n      };\n    }\n  },\n  // Remove from wishlist\n  removeFromWishlist: async (productId, userEmail) => {\n    try {\n      await api.delete(`/wishlist/remove/${productId}`);\n\n      // Update localStorage\n      const existingWishlist = JSON.parse(localStorage.getItem(`wishlist_${userEmail}`) || '[]');\n      const updatedWishlist = existingWishlist.filter(item => item._id !== productId);\n      localStorage.setItem(`wishlist_${userEmail}`, JSON.stringify(updatedWishlist));\n      return {\n        success: true\n      };\n    } catch (error) {\n      // Fallback to localStorage only\n      const existingWishlist = JSON.parse(localStorage.getItem(`wishlist_${userEmail}`) || '[]');\n      const updatedWishlist = existingWishlist.filter(item => item._id !== productId);\n      localStorage.setItem(`wishlist_${userEmail}`, JSON.stringify(updatedWishlist));\n      return {\n        success: true\n      };\n    }\n  },\n  // Get user wishlist\n  getUserWishlist: async userEmail => {\n    try {\n      const response = await api.get('/wishlist');\n\n      // Merge with localStorage\n      const localWishlist = JSON.parse(localStorage.getItem(`wishlist_${userEmail}`) || '[]');\n      const backendIds = response.data.wishlist.map(item => item._id);\n      const localOnlyItems = localWishlist.filter(item => !backendIds.includes(item._id));\n      return [...response.data.wishlist, ...localOnlyItems];\n    } catch (error) {\n      console.warn('Backend unavailable, using localStorage:', error.message);\n      return JSON.parse(localStorage.getItem(`wishlist_${userEmail}`) || '[]');\n    }\n  }\n};\nexport default wishlistService;","map":{"version":3,"names":["axios","config","API_URL","api","create","baseURL","headers","interceptors","request","use","token","localStorage","getItem","Authorization","error","Promise","reject","wishlistService","addToWishlist","product","userEmail","_product$images","response","post","productId","_id","productName","name","productPrice","price","productImage","images","existingWishlist","JSON","parse","find","item","push","setItem","stringify","data","console","warn","message","isLocal","success","removeFromWishlist","delete","updatedWishlist","filter","getUserWishlist","get","localWishlist","backendIds","wishlist","map","localOnlyItems","includes"],"sources":["d:/project1/stitch_and_savour/frontend/src/services/wishlistService.js"],"sourcesContent":["import axios from 'axios';\n\nimport { config } from '../config/config';\n\nconst API_URL = config.API_URL;\n\nconst api = axios.create({\n  baseURL: API_URL,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\n// Add token to requests\napi.interceptors.request.use(\n  (config) => {\n    const token = localStorage.getItem('token');\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n    return config;\n  },\n  (error) => Promise.reject(error)\n);\n\nexport const wishlistService = {\n  // Add to wishlist - save to both backend and localStorage\n  addToWishlist: async (product, userEmail) => {\n    try {\n      // Try to save to backend first\n      const response = await api.post('/wishlist/add', {\n        productId: product._id,\n        productName: product.name,\n        productPrice: product.price,\n        productImage: product.images?.[0] || ''\n      });\n      \n      // Update localStorage\n      const existingWishlist = JSON.parse(localStorage.getItem(`wishlist_${userEmail}`) || '[]');\n      if (!existingWishlist.find(item => item._id === product._id)) {\n        existingWishlist.push(product);\n        localStorage.setItem(`wishlist_${userEmail}`, JSON.stringify(existingWishlist));\n      }\n      \n      return response.data;\n    } catch (error) {\n      // Fallback to localStorage only\n      console.warn('Backend unavailable, saving to localStorage only:', error.message);\n      const existingWishlist = JSON.parse(localStorage.getItem(`wishlist_${userEmail}`) || '[]');\n      if (!existingWishlist.find(item => item._id === product._id)) {\n        existingWishlist.push({ ...product, isLocal: true });\n        localStorage.setItem(`wishlist_${userEmail}`, JSON.stringify(existingWishlist));\n      }\n      return { success: true };\n    }\n  },\n\n  // Remove from wishlist\n  removeFromWishlist: async (productId, userEmail) => {\n    try {\n      await api.delete(`/wishlist/remove/${productId}`);\n      \n      // Update localStorage\n      const existingWishlist = JSON.parse(localStorage.getItem(`wishlist_${userEmail}`) || '[]');\n      const updatedWishlist = existingWishlist.filter(item => item._id !== productId);\n      localStorage.setItem(`wishlist_${userEmail}`, JSON.stringify(updatedWishlist));\n      \n      return { success: true };\n    } catch (error) {\n      // Fallback to localStorage only\n      const existingWishlist = JSON.parse(localStorage.getItem(`wishlist_${userEmail}`) || '[]');\n      const updatedWishlist = existingWishlist.filter(item => item._id !== productId);\n      localStorage.setItem(`wishlist_${userEmail}`, JSON.stringify(updatedWishlist));\n      return { success: true };\n    }\n  },\n\n  // Get user wishlist\n  getUserWishlist: async (userEmail) => {\n    try {\n      const response = await api.get('/wishlist');\n      \n      // Merge with localStorage\n      const localWishlist = JSON.parse(localStorage.getItem(`wishlist_${userEmail}`) || '[]');\n      const backendIds = response.data.wishlist.map(item => item._id);\n      const localOnlyItems = localWishlist.filter(item => !backendIds.includes(item._id));\n      \n      return [...response.data.wishlist, ...localOnlyItems];\n    } catch (error) {\n      console.warn('Backend unavailable, using localStorage:', error.message);\n      return JSON.parse(localStorage.getItem(`wishlist_${userEmail}`) || '[]');\n    }\n  }\n};\n\nexport default wishlistService;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}